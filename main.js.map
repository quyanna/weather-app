{"version":3,"file":"main.js","mappings":"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","sources":["webpack://to-do-app/./src/index.js","webpack://to-do-app/./src/api-handling.js"],"sourcesContent":["import \"./reset.css\";\nimport \"./styles.css\";\n\nimport { fetchWeatherData, createWeatherObject } from \"./api-handling\";\n\nlet activeLayer, idleLayer;\n\nwindow.addEventListener(\"DOMContentLoaded\", async () => {\n  const bgLayers = document.querySelectorAll(\".bg .bg-layer\");\n  activeLayer = bgLayers[0];\n  idleLayer = bgLayers[1];\n  activeLayer.className = \"bg-layer active clear\";\n  idleLayer.className = \"bg-layer idle\";\n});\n\nconst btn = document.getElementById(\"searchBtn\");\nconst input = document.getElementById(\"location\");\nconst glassPanel = document.querySelector(\".glass\");\n\nbtn.onclick = loadData;\ninput.addEventListener(\"keypress\", function (e) {\n  if (e.key === \"Enter\") {\n    e.preventDefault();\n    loadData();\n  }\n});\n\n// Loads the weather data for the location currently in the search bar\nasync function loadData() {\n  const location = input.value.trim();\n  if (!location) return;\n\n  document.body.style.cursor = \"wait\";\n\n  try {\n    const json = await fetchWeatherData(location);\n    console.log(json);\n    const w = createWeatherObject(json);\n\n    document.getElementById(\"address\").textContent = w.address;\n    document.getElementById(\"temp\").textContent = w.temp + \"°\";\n    document.getElementById(\"conditions\").textContent = w.conditions;\n    document.getElementById(\"feelslike\").textContent = `${w.feelsLike}°`;\n    document.getElementById(\"wind\").textContent = `${w.wind} km/h`;\n    document.getElementById(\"humidity\").textContent = `${w.humidity}%`;\n    document.getElementById(\"uv\").textContent = w.uv;\n    document.getElementById(\"sunrise-value\").textContent = w.sunrise;\n    document.getElementById(\"sunset-value\").textContent = w.sunset;\n\n    applyBgFromData(json);\n\n    if (glassPanel.classList.contains(\"collapsed\")) {\n      glassPanel.classList.remove(\"collapsed\");\n    }\n  } catch (error) {\n    console.error(\"Error fetching weather data: \" + error);\n  } finally {\n    document.body.style.cursor = \"default\";\n  }\n}\n\nfunction pickThemeFromData(icon) {\n  console.log(\"Picking theme from icon: \" + icon);\n  const currentWeather = (icon || \"\").toLowerCase();\n\n  if (currentWeather.includes(\"rain\")) return \"rain\";\n  if (currentWeather.includes(\"snow\")) return \"snow\";\n  if (currentWeather.includes(\"wind\")) return \"wind\";\n  if (currentWeather.includes(\"cloud\")) return \"cloudy\";\n  return \"clear\";\n}\n\nasync function applyBgFromData(data) {\n  console.log(\"Applying background from data: \" + data);\n  try {\n    if (!data) throw new Error(\"No data provided for background selection\");\n  } catch (error) {\n    console.error(\"Error applying background from data: \" + error);\n    return;\n  }\n  const theme = pickThemeFromData(data.currentConditions.icon ?? data);\n\n  if (activeLayer.classList.contains(theme)) return;\n\n  idleLayer.className = \"bg-layer idle \" + theme;\n  idleLayer.classList.add(\"active\");\n  activeLayer.classList.remove(\"active\");\n\n  setTimeout(() => {\n    const temp = activeLayer;\n    activeLayer = idleLayer;\n    idleLayer = temp;\n    idleLayer.className = \"bg-layer idle\";\n  }, 650);\n}\n","//Module that handles all API calls and formats the data from them\n\n// Fetch weather data from Visual Crossing Weather API\nexport async function fetchWeatherData(location) {\n  try {\n    const response = await fetch(\n      `https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${location}/today?&unitGroup=metric&include=current&key=X7MF6JQ3HQAZ7UEMLUSVFSNPV&contentType=json`\n    );\n    //if there is an HTTP Error\n    if (!response.ok) {\n      throw new Error(`${response.status}`);\n    }\n    const jsonData = await response.json();\n    return jsonData;\n  } catch (error) {\n    return null;\n  }\n}\n\n//Extract the data from the json object\nexport function createWeatherObject(json) {\n  if (!json) return;\n\n  try {\n    const weatherData = {\n      address: json.resolvedAddress,\n      conditions: json.currentConditions.conditions,\n      feelsLike: Math.round(json.currentConditions.feelslike),\n      humidity: json.currentConditions.humidity,\n      temp: Math.round(json.currentConditions.temp),\n      sunrise: json.currentConditions.sunrise,\n      sunset: json.currentConditions.sunset,\n      timezone: json.timezone,\n      icon: json.currentConditions.icon.toLowerCase(),\n      wind: json.currentConditions.windspeed,\n      uv: json.currentConditions.uvindex,\n    };\n    return weatherData;\n  } catch (error) {\n    console.error(\"Error creating weather object: \" + error);\n    return null;\n  }\n}\n"],"names":["activeLayer","idleLayer","window","addEventListener","async","bgLayers","document","querySelectorAll","className","btn","getElementById","input","glassPanel","querySelector","loadData","location","value","trim","body","style","cursor","json","response","fetch","ok","Error","status","error","fetchWeatherData","console","log","w","address","resolvedAddress","conditions","currentConditions","feelsLike","Math","round","feelslike","humidity","temp","sunrise","sunset","timezone","icon","toLowerCase","wind","windspeed","uv","uvindex","createWeatherObject","textContent","data","theme","currentWeather","includes","pickThemeFromData","classList","contains","add","remove","setTimeout","applyBgFromData","onclick","e","key","preventDefault"],"sourceRoot":""}