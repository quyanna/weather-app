(()=>{"use strict";let e,t;window.addEventListener("DOMContentLoaded",async()=>{const n=document.querySelectorAll(".bg .bg-layer");e=n[0],t=n[1],e.className="bg-layer active clear",t.className="bg-layer idle"});const n=document.getElementById("searchBtn"),o=document.getElementById("location"),s=document.querySelector(".glass");async function r(){const n=o.value.trim();if(n){document.body.style.cursor="wait";try{const o=await async function(e){try{const t=await fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${e}/today?&unitGroup=metric&include=current&key=X7MF6JQ3HQAZ7UEMLUSVFSNPV&contentType=json`);if(!t.ok)throw new Error(`${t.status}`);return await t.json()}catch(e){return null}}(n);console.log(o);const r=function(e){if(e)try{return{address:e.resolvedAddress,conditions:e.currentConditions.conditions,feelsLike:Math.round(e.currentConditions.feelslike),humidity:e.currentConditions.humidity,temp:Math.round(e.currentConditions.temp),sunrise:e.currentConditions.sunrise,sunset:e.currentConditions.sunset,timezone:e.timezone,icon:e.currentConditions.icon.toLowerCase(),wind:e.currentConditions.windspeed,uv:e.currentConditions.uvindex}}catch(e){return console.error("Error creating weather object: "+e),null}}(o);document.getElementById("address").textContent=r.address,document.getElementById("temp").textContent=r.temp+"°",document.getElementById("conditions").textContent=r.conditions,document.getElementById("feelslike").textContent=`${r.feelsLike}°`,document.getElementById("wind").textContent=`${r.wind} km/h`,document.getElementById("humidity").textContent=`${r.humidity}%`,document.getElementById("uv").textContent=r.uv,document.getElementById("sunrise-value").textContent=r.sunrise,document.getElementById("sunset-value").textContent=r.sunset,async function(n){console.log("Applying background from data: "+n);try{if(!n)throw new Error("No data provided for background selection")}catch(e){return void console.error("Error applying background from data: "+e)}const o=function(e){console.log("Picking theme from icon: "+e);const t=(e||"").toLowerCase();return t.includes("rain")?"rain":t.includes("snow")?"snow":t.includes("wind")?"wind":t.includes("cloud")?"cloudy":"clear"}(n.currentConditions.icon??n);e.classList.contains(o)||(t.className="bg-layer idle "+o,t.classList.add("active"),e.classList.remove("active"),setTimeout(()=>{const n=e;e=t,t=n,t.className="bg-layer idle"},650))}(o),s.classList.contains("collapsed")&&s.classList.remove("collapsed")}catch(e){console.error("Error fetching weather data: "+e)}finally{document.body.style.cursor="default"}}}n.onclick=r,o.addEventListener("keypress",function(e){"Enter"===e.key&&(e.preventDefault(),r())})})();
//# sourceMappingURL=main.js.map